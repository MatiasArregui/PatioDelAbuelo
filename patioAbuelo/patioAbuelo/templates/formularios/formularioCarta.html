{% extends "base.html" %}
{% block content %}



<div class="container">
    <h3 class="display-4 my-3">Carta</h3>
    <form method="post" enctype="multipart/form-data" id="formulario">
        {% csrf_token %}
        {{ form.as_p }}
        <button class="btn btn-primary mb-3" type="submit">Guardar</button>
        <a class="btn btn-outline-primary mb-3" href="{% url 'listaCarta' %}">Cancelar</a>
    </form>
</div>
<br/>
<script>
    function updateSelect2() {
        // Obtenemos el objeto DOM del primer select
        const select1 = document.getElementById('id_categoria');
        // Obtenemos el objeto DOM del segundo select
        const select2 = document.getElementById('id_subCategoria');
        // Convertimos el objeto obtenido en un valor que usaremos para los condicionales porteriores
        const selectedValue = select1.value;

        // Limpiar segundo select (select2)
        select2.innerHTML = '';
        let options = [];
        console.log(selectedValue);
        if (selectedValue == 1) {
            options = {{ opcionesPlato|safe }};
        };
        if (selectedValue == 2) {
            options = {{ opcionesBebida|safe }};
        };
        if (selectedValue == 3) {
            options = {{ opcionesPostre|safe }};
        };

        // Agregar nuevas opciones
        options.forEach(option => {
            const newOption = document.createElement('option');
            newOption.value = option["value"];
            newOption.text = option["text"];
            select2.appendChild(newOption);
        });
    }
</script>
{% endblock %}